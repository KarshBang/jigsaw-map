{"version":3,"file":"main.js","sources":["webpack:///webpack/bootstrap","webpack:///./src/index.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///./src/baseMap.ts","webpack:///./src/index.css?cfe4","webpack:///./src/index.ts","webpack:///./src/map.ts","webpack:///./src/util.ts"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"* {\\r\\n    padding: 0;\\r\\n    margin: 0;\\r\\n    background: #f5f5f5;\\r\\n    text-align: center;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n#container {\\r\\n    width: 800px;\\r\\n    height: 800px;\\r\\n    overflow: hidden;\\r\\n    position: absolute;\\r\\n    margin: auto;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    top: 0;\\r\\n    bottom: 0;\\r\\n\\r\\n}\\r\\n\\r\\n#mini-map {\\r\\n    width: 200px;\\r\\n    height: 200px;\\r\\n    background-color: red;\\r\\n    overflow: hidden;\\r\\n    position: absolute;\\r\\n    border: 2px;\\r\\n    border-style: groove;\\r\\n    border-radius: 50%;\\r\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.3), 0 6px 20px 0 rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n#mask {\\r\\n    transition-property: transform;\\r\\n    transition-duration: 200ms;\\r\\n    transition-timing-function: linear;\\r\\n}\\r\\n\\r\\n#mask.mask-drag {\\r\\n    transition: none;\\r\\n}\\r\\n\\r\\n\\r\\n.map-img {\\r\\n    width: 200px;\\r\\n    height: 200px;\\r\\n    font-size: large;\\r\\n    font-weight: 600;\\r\\n    text-align: center;\\r\\n    line-height: 200px;\\r\\n    background-color: gray;\\r\\n    box-sizing: content-box;\\r\\n    /* border: 1px solid brown; */\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.map-img>img {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n#eagle {\\r\\n    width: 200px;\\r\\n    height: 200px;\\r\\n    position: absolute;\\r\\n    margin: auto;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    margin-right: calc(50% + 420px);\\r\\n    bottom: 0;\\r\\n    top: 0;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n#eagle span {\\r\\n    position: absolute;\\r\\n    height: 10px;\\r\\n    width: 10px;\\r\\n    background: white;\\r\\n    box-sizing: border-box;\\r\\n    border: 3px solid pink;\\r\\n    opacity: 0.5;\\r\\n}\\r\\n\\r\\n#eagle img {\\r\\n    width: 200px;\\r\\n    height: 200px;\\r\\n}\\r\\n\\r\\nimg::after {\\r\\n    content: \\\"\\\";\\r\\n    height: 100%;\\r\\n    width: 100%;\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    background: black;\\r\\n}\\r\\n\\r\\n\\r\\n#container,\\r\\n#eagle>img {\\r\\n    box-shadow: 2px 2px 5px #333333;\\r\\n}\\r\\n\\r\\nmain {\\r\\n    /* position: absolute; */\\r\\n    top: 0;\\r\\n    margin: auto;\\r\\n    bottom: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n}\\r\\n\\r\\n#root {\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\nfooter {\\r\\n    font-size: 14px;\\r\\n    padding: 20px;\\r\\n    color: rgba(0, 0, 0, 0.65);\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\nul {\\r\\n    list-style-type: none;\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n    padding-top: 6px;\\r\\n    padding-bottom: 6px;\\r\\n    display: inline;\\r\\n}\\r\\n\\r\\nli {\\r\\n    display: inline;\\r\\n    direction: initial;\\r\\n}\\r\\n\\r\\na:link,\\r\\na:visited {\\r\\n    font-weight: bold;\\r\\n    color: #FFFFFF;\\r\\n    background-color: #409EFF;\\r\\n    text-align: center;\\r\\n    padding: 6px;\\r\\n    text-decoration: none;\\r\\n    text-transform: uppercase;\\r\\n}\\r\\n\\r\\na:hover,\\r\\na:active {\\r\\n    background-color: #3077BF;\\r\\n}\\r\\n\\r\\nh1{\\r\\n    padding: 20px;\\r\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","import { throttle, getLeft, getTop, posRemainer } from './util'\r\ntype imgList = HTMLElement[]\r\ntype numberPair = [number, number]\r\ninterface MiniMapConfig {\r\n    xRange: numberPair\r\n    yRange: numberPair\r\n}\r\nexport interface MapConfig {\r\n    imgSize: numberPair\r\n    xRange: numberPair\r\n    yRange: numberPair\r\n    levelLimit?: number\r\n    scaleRange?: numberPair\r\n    miniMap?: MiniMapConfig\r\n    scaleUnitBase?: number\r\n}\r\n\r\nexport interface srcParam {\r\n    x: number,\r\n    y: number,\r\n    level?: number,\r\n    // option: string\r\n}\r\n\r\n\r\n\r\nfunction addDrag(container: HTMLElement, dom: HTMLElement, map: BaseMap): void {\r\n\r\n    dom.style.position = 'absolute'\r\n\r\n    let x = 0\r\n    let y = 0\r\n    let l = 0\r\n    let t = 0\r\n    let isDrag = false\r\n    //todo 双向绑定\r\n    let left = 0\r\n    let top = 0\r\n    const mouseDown = (e: MouseEvent) => {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        x = e.clientX\r\n        y = e.clientY\r\n        // l = dom.offsetLeft\r\n        // t = dom.offsetTop\r\n        l = map.x\r\n        t = map.y\r\n        isDrag = true\r\n        dom.style.cursor = 'move'\r\n        map.isDrag(true)\r\n        // dom.classList.add('mask-drag')\r\n    }\r\n    const mouseMove = (e: MouseEvent) => {\r\n        e.stopPropagation()\r\n\r\n        if (!isDrag) return\r\n        const clientX = e.clientX\r\n        const clientY = e.clientY\r\n        left = clientX - (x - l)\r\n        top = clientY - (y - t)\r\n        map.x = left\r\n        map.y = top\r\n        // dom.style.left = left + 'px'\r\n        // dom.style.top = top + 'px'\r\n    }\r\n    const mouseUp = (e: MouseEvent) => {\r\n        e.stopPropagation()\r\n        isDrag = false\r\n        dom.style.cursor = null\r\n        map.isDrag(false)\r\n        // dom.classList.remove('mask-drag')\r\n    }\r\n    container.onmousemove = mouseMove\r\n    container.onmousedown = mouseDown\r\n    container.onmouseup = mouseUp\r\n    container.oncontextmenu = function (e: MouseEvent) {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        console.log(123)\r\n    }\r\n}\r\n\r\n\r\nfunction addScroll(container: HTMLElement, dom: HTMLElement, map: BaseMap, initStep: number = 0.1): (a: number) => number {\r\n    let step = initStep\r\n    const wheel = (e: MouseWheelEvent) => {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        const offsetLeft = getLeft(container)\r\n        const offsetTop = getTop(container)\r\n        const x = e.clientX - offsetLeft\r\n        const y = e.clientY - offsetTop\r\n        map.mouseX = x\r\n        map.mouseY = y\r\n        if (e.deltaY > 0) {\r\n            map.scale -= step\r\n        } else {\r\n            map.scale += step\r\n        }\r\n    }\r\n    container.addEventListener('wheel', (e: Event) => {\r\n        e.stopPropagation()\r\n    })\r\n    container.addEventListener('wheel', throttle(wheel, 200))\r\n    // container.onwheel = throttle(wheel, 200)\r\n    return function (newStep?: number): number {\r\n        if (newStep === undefined) {\r\n            return step\r\n        }\r\n        return step = newStep\r\n    }\r\n}\r\n\r\n\r\nabstract class AbstractMap {\r\n    //层数\r\n    level: number\r\n\r\n    //图片数量\r\n    rowNum = 4\r\n    colNum = 4\r\n    //图片尺寸\r\n    imgWidth: number\r\n    imgHeight: number\r\n    rowList: imgList[]\r\n    colList: imgList[]\r\n\r\n    //图片上(左)边缘的坐标和索引\r\n    rowEdge: number\r\n    colEdge: number\r\n    rowEdgeIndex: number\r\n    colEdgeIndex: number\r\n\r\n    //鼠标当前位置,用于缩放\r\n    mouseX: number\r\n    mouseY: number\r\n\r\n    //地图的起始横纵编号\r\n    baseCol: number\r\n    baseRow: number\r\n\r\n    //地图的偏移量以及缩放比例\r\n    protected _xCoordinate: number\r\n    protected _yCoordinate: number\r\n    protected _scale: number\r\n\r\n    //图片更新的范围\r\n    protected minX: number\r\n    protected maxX: number\r\n    protected minY: number\r\n    protected maxY: number\r\n    protected minScale: number\r\n    protected maxScale: number\r\n    //每一次改变图片位置,图片坐标偏移量: rowNum * imgHeight\r\n    protected difX: number\r\n    protected difY: number\r\n\r\n    //dom\r\n    mask: HTMLElement\r\n    container: HTMLElement\r\n\r\n    abstract init(patchInit?: () => HTMLElement): void\r\n    abstract patchInit(): HTMLElement\r\n    abstract mapSrc(func?: (dom: HTMLElement, params: srcParam) => void): void\r\n    abstract createMap(deltaX: number, deltaY: number, level: number): void\r\n    abstract getUrl(dom: HTMLElement, params: srcParam): void\r\n\r\n    abstract x: number\r\n    abstract y: number\r\n    abstract scale: number\r\n}\r\n\r\n\r\nclass BaseMap extends AbstractMap {\r\n\r\n    constructor(container: HTMLElement, config: MapConfig) {\r\n        super()\r\n            ;[this.minX, this.maxX] = config.xRange\r\n            ;[this.minY, this.maxY] = config.yRange\r\n            ;[this.imgHeight, this.imgWidth] = config.imgSize\r\n            ;[this.minScale, this.maxScale] = config.scaleRange || [2 / 3, 1.5]\r\n        this.minX -= 2*this.imgWidth\r\n        this.maxX += 2*this.imgWidth\r\n        this.minY -= 2*this.imgHeight\r\n        this.maxY += 2*this.imgHeight\r\n\r\n\r\n        const xDomain = this.maxX - this.minX\r\n        const yDomain = this.maxY - this.minY\r\n\r\n        try {\r\n            if (xDomain <= 0 || yDomain <= 0) {\r\n                throw 'map range can not be negative'\r\n            }\r\n            if (this.imgHeight <= 0 || this.imgWidth <= 0) {\r\n                throw 'img size can not be negative'\r\n            }\r\n        } catch (e) {\r\n            console.warn(e)\r\n            return\r\n        }\r\n\r\n\r\n        this.colNum = Math.floor(xDomain / this.imgWidth)\r\n        this.rowNum = Math.floor(yDomain / this.imgHeight)\r\n        this.difX = this.colNum * this.imgWidth\r\n        this.difY = this.rowNum * this.imgHeight\r\n\r\n\r\n        this.rowList = new Array(this.rowNum).fill(0).map(() => [])\r\n        this.colList = new Array(this.colNum).fill(0).map(() => [])\r\n        const mask = document.createElement('div')\r\n        this.mask = mask\r\n        this.container = container\r\n        mask.id = 'mask'\r\n        container.appendChild(mask)\r\n    }\r\n\r\n    init(patchInit?: () => HTMLElement) {\r\n        const { mask, container } = this\r\n        if (patchInit) {\r\n            this.patchInit = patchInit\r\n        }\r\n        //init\r\n        for (let i = 0; i < this.rowNum; ++i) {\r\n            for (let j = 0; j < this.colNum; ++j) {\r\n                const patch = this.patchInit()\r\n                patch.classList.add('map-img')\r\n                mask.appendChild(patch)\r\n                this.rowList[i].push(patch)\r\n                this.colList[j].push(patch)\r\n            }\r\n        }\r\n        addDrag(container, mask, this)\r\n        const changeScrollStep = addScroll(container, mask, this, 0.5)\r\n        this.createMap(-2, -2)\r\n        //todo 初始时地图居中\r\n        const partialX = ((this.maxX - this.minX) - this.colNum * this.imgWidth) / 2 + this.minX\r\n        const partialY = ((this.maxY - this.minY) - this.rowNum * this.imgHeight) / 2 + this.minY\r\n        console.log(partialX, partialY)\r\n        this.x = partialX\r\n        this.y = partialY\r\n        return changeScrollStep\r\n    }\r\n\r\n    patchInit(): HTMLElement {\r\n        const patch = document.createElement('div')\r\n        const image = new Image()\r\n        patch.appendChild(image)\r\n        return patch\r\n    }\r\n\r\n    mapSrc(func?: (dom: HTMLElement, params: srcParam) => void) {\r\n        if (func) {\r\n            this._getUrl = func\r\n        } else {\r\n            return this._getUrl\r\n        }\r\n    }\r\n\r\n    createMap(deltaX: number = 0, deltaY: number = 0, level: number = 0) {\r\n\r\n        this._scale = 1\r\n        this.rowEdge = 0\r\n        this.colEdge = 0\r\n        this.rowEdgeIndex = 0\r\n        this.colEdgeIndex = 0\r\n        this._xCoordinate = 0\r\n        this._yCoordinate = 0\r\n\r\n        this.level = level\r\n        this.baseCol = deltaX\r\n        this.baseRow = deltaY\r\n\r\n        const { rowNum, colNum, rowList, mask } = this\r\n        mask.style.transform = `translate3d(${0}px, ${0}px, 0) scale(${1})`\r\n        // mask.style.transform = `scale(${1})`\r\n        // mask.style.top = `${0}px`\r\n        // mask.style.left = `${0}px`\r\n        for (let i = 0; i < rowNum; ++i) {\r\n            const row: imgList = rowList[i]\r\n            for (let j = 0; j < colNum; ++j) {\r\n                const img = row[j]\r\n                this.getUrl(img, { y: i + deltaY, x: j + deltaX })\r\n                img.style.top = `${i * 200}px`\r\n                img.style.left = `${j * 200}px`\r\n            }\r\n        }\r\n    }\r\n\r\n    isDrag(drag: boolean) {\r\n        if(drag) {\r\n            this.mask.classList.add('mask-drag')\r\n        } else {\r\n            this.mask.classList.remove('mask-drag')\r\n        }\r\n    }\r\n    //todo 修改为操作元素changeElement\r\n    // 添加事件可能通过继承一个新的类,扩展此方法\r\n    getUrl(dom: HTMLElement, params: srcParam) {\r\n        // const img: any = dom.firstElementChild\r\n        // const half = 500 * Math.pow(this.maxScale, this.level)\r\n        params.level = this.level\r\n        this._getUrl(dom, params)\r\n\r\n        // if (!img.src) {\r\n            // img.src = `http://127.0.0.1:8081/${this.level+1}-${params.x}-${params.y}.png`\r\n        // }\r\n        // img.height = 2 * half\r\n        // img.width = 2 * half\r\n        // img.style.left = `${-params.x * 200}px`\r\n        // img.style.top = `${-params.y * 200}px`\r\n    }\r\n    _getUrl(dom: HTMLElement, params: srcParam) {\r\n        // (<HTMLImageElement>dom).src = `http://127.0.0.1:8081/${params.level+1}-${params.x}-${params.y}.png`\r\n    }\r\n\r\n\r\n    _setScale(newScale: number): [number, number] {\r\n        this.mask.classList.remove('mask-drag')\r\n        const { mask, mouseX, mouseY, _scale: oldScale } = this\r\n        const oldTop = this.y\r\n        const oldLeft = this.x\r\n        const top = mouseY * (oldScale - newScale) / oldScale + oldTop * newScale / oldScale\r\n        const left = mouseX * (oldScale - newScale) / oldScale + oldLeft * newScale / oldScale\r\n        //done: 调整缩放的原点\r\n        // mask.style.transform = `scale(${newScale})`\r\n        // mask.style.top = `${top}px`\r\n        // mask.style.left = `${left}px`\r\n        mask.style.transform = `translate3d(${left}px, ${top}px, 0) scale(${newScale})`\r\n        this._scale = newScale\r\n        this._xCoordinate = left\r\n        this._yCoordinate = top\r\n\r\n        return [left, top]\r\n    }\r\n\r\n    _setX(newX: number){\r\n        const { minX, maxX, difX: dif } = this\r\n\r\n        let upBound = (newX - minX) / this._scale - this.imgWidth\r\n        let lowBonud = (newX - maxX) / this._scale + dif + this.imgWidth\r\n        let round: number\r\n        if (this.colEdge < upBound) {\r\n            round = Math.floor((upBound - this.colEdge) / (this.colNum * this.imgWidth * this._scale))\r\n            if (round > 0) {\r\n                newX -= this.colNum * this.imgWidth * round * this._scale\r\n                this.baseCol -= round * this.colNum\r\n                upBound -= this.imgWidth * round * this.colNum\r\n                this.refresh()\r\n            }\r\n        }\r\n        while (this.colEdge < upBound) {\r\n            this.colEdgeIndex--\r\n            const paramX = this.colEdgeIndex + this.baseCol\r\n            const col = posRemainer(this.colEdgeIndex, this.colNum)\r\n            const startRow = posRemainer(this.rowEdgeIndex, this.rowNum)\r\n            // 改成let key in的形式会比较好\r\n            this.colList[col].forEach((img: HTMLElement, index) => {\r\n                const partialRow = posRemainer(index - startRow, this.rowNum)\r\n                const left = parseInt(img.style.left) - dif\r\n                img.style.left = left + 'px'\r\n                this.getUrl(img, { x: paramX, y: this.rowEdgeIndex + partialRow + this.baseRow })\r\n            })\r\n            this.colEdge += this.imgWidth\r\n        }\r\n\r\n        if (this.colEdge > lowBonud) {\r\n            round = Math.floor((this.colEdge - lowBonud) / (this.colNum * this.imgWidth * this._scale))\r\n            if (round > 0) {\r\n                newX += this.colNum * this.imgWidth * round * this._scale\r\n                this.baseCol += round * this.colNum\r\n                lowBonud += this.imgWidth * round * this.colNum\r\n                this.refresh()\r\n            }\r\n        }\r\n\r\n        while (this.colEdge > lowBonud) {\r\n            const paramX = this.colEdgeIndex + this.colNum + this.baseCol\r\n            const col = posRemainer(this.colEdgeIndex, this.colNum)\r\n            const startRow = posRemainer(this.rowEdgeIndex, this.rowNum)\r\n            this.colList[col].forEach((img: HTMLElement, index) => {\r\n                const partialRow = posRemainer(index - startRow, this.rowNum)\r\n                const left = parseInt(img.style.left) + dif\r\n                img.style.left = left + 'px'\r\n                this.getUrl(img, { x: paramX, y: this.rowEdgeIndex + partialRow + this.baseRow })\r\n            })\r\n            this.colEdgeIndex++\r\n            this.colEdge -= this.imgWidth\r\n        }\r\n\r\n        this._xCoordinate = newX\r\n        this.mask.style.transform = `translate3d(${newX}px, ${this.y}px, 0) scale(${this.scale})`\r\n    }\r\n\r\n    _setY(newY:number){\r\n        const { minY, maxY, difY: dif } = this\r\n        let upBound = (newY - minY) / this._scale - this.imgHeight\r\n        let lowBonud = (newY - maxY) / this._scale + dif + this.imgHeight\r\n        let round: number\r\n        if (this.rowEdge < upBound) {\r\n            round = Math.floor((upBound - this.rowEdge) / (this.rowNum * this.imgHeight))\r\n            if (round > 0) {\r\n                newY -= this.rowNum * this.imgHeight * round * this._scale\r\n                this.baseCol -= round * this.rowNum\r\n                upBound -= this.imgHeight * round * this.rowNum\r\n                this.refresh()\r\n            }\r\n        }\r\n        while (this.rowEdge < upBound) {\r\n            this.rowEdgeIndex--\r\n            const paramY = this.rowEdgeIndex + this.baseRow\r\n            const row = posRemainer(this.rowEdgeIndex, this.rowNum)\r\n            const startCol = posRemainer(this.colEdgeIndex, this.colNum)\r\n            this.rowList[row].forEach((img: HTMLElement, index) => {\r\n                const partialCol = posRemainer(index - startCol, this.colNum)\r\n                const top = parseInt(img.style.top) - dif\r\n                img.style.top = top + 'px'\r\n                this.getUrl(img, { x: this.colEdgeIndex + partialCol + this.baseCol, y: paramY })\r\n            })\r\n            this.rowEdge += this.imgHeight\r\n        }\r\n\r\n\r\n        if (this.rowEdge > lowBonud) {\r\n            round = Math.floor((this.rowEdge - lowBonud) / (this.rowNum * this.imgHeight))\r\n            if (round > 0) {\r\n                newY += this.rowNum * this.imgHeight * round * this._scale\r\n                this.baseCol += round * this.rowNum\r\n                lowBonud += this.imgHeight * round * this.rowNum\r\n                this.refresh()\r\n            }\r\n        }\r\n        while (this.rowEdge > lowBonud) {\r\n            const paramY = this.rowEdgeIndex + this.rowNum + this.baseRow\r\n            const row = posRemainer(this.rowEdgeIndex, this.rowNum)\r\n            const startCol = posRemainer(this.colEdgeIndex, this.colNum)\r\n            this.rowList[row].forEach((img: HTMLElement, index) => {\r\n                const partialCol = posRemainer(index - startCol, this.colNum)\r\n                const top = parseInt(img.style.top) + dif\r\n                img.style.top = top + 'px'\r\n                this.getUrl(img, { x: this.colEdgeIndex + partialCol + this.baseCol, y: paramY })\r\n            })\r\n\r\n            this.rowEdgeIndex++\r\n            this.rowEdge -= this.imgHeight\r\n        }\r\n        this._yCoordinate = newY\r\n        this.mask.style.transform = `translate3d(${this.x}px, ${newY}px, 0) scale(${this.scale})`\r\n    }\r\n\r\n\r\n    get scale(): number {\r\n        return this._scale\r\n    }\r\n\r\n    set scale(newScale: number) {\r\n        if(!this.level && newScale < 1) return\r\n        if (newScale < this.minScale) {\r\n            if (this._scale > this.minScale) {\r\n                newScale = this.minScale\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n\r\n        if (newScale > this.maxScale) {\r\n            if (this._scale < this.maxScale) {\r\n                newScale = this.maxScale\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        this._setScale(newScale)\r\n    }\r\n\r\n    get x(): number {\r\n        return this._xCoordinate\r\n    }\r\n    get y(): number {\r\n        return this._yCoordinate\r\n    }\r\n\r\n    //todo 改造setx set y\r\n    //到边界禁止移动\r\n    set x(newX: number) {\r\n        this._setX(newX)\r\n    }\r\n\r\n    set y(newY: number) {\r\n        this._setY(newY)\r\n    }\r\n\r\n    refresh() {\r\n        console.log('refresh')\r\n        const startRow = posRemainer(this.rowEdgeIndex, this.rowNum)\r\n        const startCol = posRemainer(this.colEdgeIndex, this.colNum)\r\n        this.rowList.forEach((rowList, rowIndex) => {\r\n            const partialRow = posRemainer(rowIndex - startRow, this.rowNum)\r\n            rowList.forEach((img, colIndex) => {\r\n                const partialCol = posRemainer(colIndex - startCol, this.colNum)\r\n                this.getUrl(img, { x: this.colEdgeIndex + partialCol + this.baseCol, y: this.rowEdgeIndex + partialRow + this.baseRow })\r\n            })\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default BaseMap","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js!./index.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","\r\nimport AbstractMap, { EagleEye } from './map'\r\nimport { srcParam } from './baseMap'\r\nimport {posRemainer} from './util'\r\nimport './index.css'\r\n\r\nconst onhashchange = () => {\r\n    location.reload()\r\n}\r\nwindow.onhashchange = onhashchange\r\n\r\nwindow.onload = () => {\r\n    if (location.hash.length === 0 || location.hash === '#institutional-migration') {\r\n        return acemap('/institutional-migration')\r\n    } else if (location.hash === '#seminal-papers') {\r\n        return acemap('/seminal-papers')\r\n    } else if(location.hash === '#skeleton') {\r\n        return showSkeleton()\r\n    }\r\n    const querySet = getUrlQuery(location.hash)\r\n    if(querySet.random) {\r\n        return showOneImg(querySet.src)\r\n    }\r\n    if(querySet.src) {\r\n        if(querySet.src==='null') {\r\n            return showOneImg('https://api.ixiaowai.cn/gqapi/gqapi.php')\r\n        }\r\n        return showOneImg(querySet.src)\r\n    }\r\n    else {\r\n        window.onhashchange = null\r\n        const url = prompt('input a image url')\r\n        location.hash = `#img?src=${url}`\r\n        showOneImg(querySet.src)\r\n        window.onhashchange = onhashchange\r\n    }\r\n}\r\n\r\nfunction getUrlQuery(url: string) {\r\n    const res: any = {}\r\n    const split = url.split('?')\r\n    if (split.length < 2) {\r\n        return res\r\n    }\r\n    const list = split[1].split('&')\r\n    for (let q of list) {\r\n        const [key, value] = q.split('=')\r\n        res[key] = value\r\n    }\r\n    return res\r\n}\r\n\r\n\r\n\r\nfunction acemap(filepath: string = '') {\r\n    const container = document.getElementById('container')\r\n    const baseUrl = `./img${filepath}`\r\n    const range: [number, number] = [0, 800]\r\n    const a = new AbstractMap(container, {\r\n        xRange: range,\r\n        yRange: range,\r\n        imgSize: [200, 200],\r\n        levelLimit: 4,\r\n        scaleRange: [0.5, 2],\r\n        miniMap: {\r\n            xRange: range,\r\n            yRange: range,\r\n        }\r\n    })\r\n    const eagleContainer = document.getElementById('eagle')\r\n    const b = new EagleEye(eagleContainer, { mapRange: [900, 900], mapCanvasSize: [800, 800], eagleSize: [200, 200] })\r\n    b.linkToMap(a, (dom) => {\r\n        const img = new Image()\r\n        img.src = baseUrl + '/0.png'\r\n        img.width = 200\r\n        img.height = 200\r\n        dom.appendChild(img)\r\n    })\r\n    a.mapSrc(function (dom: HTMLElement, params: srcParam) {\r\n        const { x, y } = params\r\n        const max = Math.pow(4, this.level + 1)\r\n        if (0 > x || max <= x || 0 > y || max <= y) {\r\n            (<HTMLImageElement>dom).src = baseUrl + `/-1.png`\r\n            return\r\n        }\r\n        (<HTMLImageElement>dom).src = baseUrl + `/${this.level + 1}-${x}-${y}.png`\r\n    })\r\n    a.init(() => {\r\n        const image = new Image()\r\n        return image\r\n    })\r\n}\r\nfunction showOneImg(imgUrl: string) {\r\n    const container = document.getElementById('container')\r\n    const range: [number, number] = [0, 800]\r\n    const a = new AbstractMap(container, {\r\n        xRange: range,\r\n        yRange: range,\r\n        imgSize: [200, 200],\r\n        levelLimit: 4,\r\n        scaleRange: [0.5, 2],\r\n        miniMap: {\r\n            xRange: range,\r\n            yRange: range,\r\n        }\r\n    })\r\n    const eagleContainer = document.getElementById('eagle')\r\n    const b = new EagleEye(eagleContainer, { mapRange: [900, 900], mapCanvasSize: [800, 800], eagleSize: [200, 200] })\r\n    b.linkToMap(a, (dom) => {\r\n        const img = new Image()\r\n        img.src = imgUrl\r\n        img.width = 200\r\n        img.height = 200\r\n        dom.appendChild(img)\r\n    })\r\n    a.mapSrc(function (dom: HTMLElement, params: srcParam) {\r\n        const img: any = dom.firstElementChild\r\n        const round = Math.pow(this.maxScale, this.level)\r\n        const size = round * 800\r\n\r\n        if (!img.src) {\r\n            img.src = imgUrl\r\n        }\r\n        img.height = size\r\n        img.width = size\r\n        img.style.left = `${-posRemainer(params.x, 4*round) * 200}px`\r\n        img.style.top = `${-posRemainer(params.y, 4* round) * 200}px`\r\n    })\r\n    a.init(() => {\r\n        const patch = document.createElement('div')\r\n        const image = new Image()\r\n        patch.style.border = '1px solid brown'\r\n        patch.appendChild(image)\r\n        return patch\r\n    })\r\n}\r\nfunction showSkeleton() {\r\n    const container = document.getElementById('container')\r\n    const range: [number, number] = [0, 800]\r\n    const a = new AbstractMap(container, {\r\n        xRange: range,\r\n        yRange: range,\r\n        imgSize: [200, 200],\r\n        levelLimit: 4,\r\n        scaleRange: [0.5, 2],\r\n        miniMap: {\r\n            xRange: range,\r\n            yRange: range,\r\n        }\r\n    })\r\n    const eagleContainer = document.getElementById('eagle')\r\n    const b = new EagleEye(eagleContainer, { mapRange: [900, 900], mapCanvasSize: [800, 800], eagleSize: [200, 200] })\r\n    b.linkToMap(a, (dom) => {\r\n        const img = new Image()\r\n        // img.src = imgUrl\r\n        img.style.width = '200px'\r\n        img.style.height = '200px'\r\n        dom.appendChild(img)\r\n    })\r\n    a.mapSrc(function (dom: HTMLElement, params: srcParam) {\r\n        dom.innerText = `${this.level}+${params.x}+${params.y}`\r\n    })\r\n    a.init(() => {\r\n        const patch = document.createElement('div')\r\n        patch.style.border = '1px solid brown'\r\n        return patch\r\n    })\r\n}\r\n\r\ndeclare global {\r\n    interface Window {\r\n        test: AbstractMap\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","import BaseMap, { MapConfig } from './baseMap'\r\nimport { getLeft, getTop } from './util'\r\n//todo 修改为 HTMLImageElement\r\n\r\nfunction addContext(container: HTMLElement, map: MagnifierMap) {\r\n\r\n    const context = (e: MouseEvent) => {\r\n        console.log('asd')\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        const offsetLeft = getLeft(container)\r\n        const offsetTop = getTop(container)\r\n        const x = e.clientX - offsetLeft\r\n        const y = e.clientY - offsetTop\r\n        map.mouseX = x\r\n        map.mouseY = y\r\n        console.log(x, y)\r\n        map.magnifier = true\r\n    }\r\n    container.oncontextmenu = context\r\n}\r\n\r\nclass LayerMap extends BaseMap {\r\n    readonly scaleUnitBase: number\r\n    scaleUnit: number\r\n    levelLimit: number\r\n    scrollStep: (a: number) => number\r\n    moveListeners: ((orgin: [number, number], pixelSize: [number, number]) => void)[]\r\n\r\n    constructor(container: HTMLElement, config: MapConfig) {\r\n        super(container, config)\r\n        this.moveListeners = []\r\n        this.levelLimit = config.levelLimit >= 1 ? config.levelLimit : 1\r\n        this.scaleUnitBase = config.scaleUnitBase || 225\r\n    }\r\n    createMap(deltaX: number = 0, deltaY: number = 0, level: number = 0) {\r\n        super.createMap(deltaX, deltaY, level)\r\n        this.scaleUnit = this.scaleUnitBase / Math.pow(this.maxScale, level)\r\n        this.emitMove()\r\n    }\r\n\r\n    init(patchInit?: () => HTMLElement) {\r\n        this.scrollStep = super.init(patchInit)\r\n        return this.scrollStep\r\n    }\r\n\r\n    get scale(): number {\r\n        return this._scale\r\n    }\r\n\r\n    set scale(newScale: number) {\r\n        if(!this.level && newScale < 1) return\r\n        if (newScale < this.minScale) {\r\n            if (this._scale > this.minScale) {\r\n                newScale = this.minScale\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n\r\n        if (newScale > this.maxScale) {\r\n            if (this._scale < this.maxScale) {\r\n                newScale = this.maxScale\r\n            } else {\r\n                return\r\n            }\r\n        }\r\n        const [left, top] = this._setScale(newScale)\r\n        //todo 判断当scale到达一定程度之后刷新图层\r\n        if (newScale >= this.maxScale || newScale <= this.minScale) {\r\n            const newLevel = newScale > 1 ? this.level + 1 : this.level - 1\r\n            if (newLevel < 0 || newLevel >= this.levelLimit) {\r\n                return\r\n            }\r\n\r\n            //BUG: 这个式子可能有问题 miny 应该也应该*newScale,亦或是miny不应参与计算\r\n            // const newLeft = (left - minX) - this.colEdge * newScale\r\n            const newLeft = left - this.colEdge * newScale\r\n            const newTop = top - this.rowEdge * newScale\r\n            const { scaleUnit, baseCol, baseRow } = this\r\n            //todo: 加入baserow\r\n            //todo: 坐标越界直接取余\r\n            const mapX = (baseCol + this.colEdgeIndex) * scaleUnit\r\n            const mapY = (baseRow + this.rowEdgeIndex) * scaleUnit\r\n            console.log(mapX, mapY)\r\n\r\n            const newScaleUnit = newScale > 1 ? scaleUnit / this.maxScale : scaleUnit * this.maxScale\r\n            //计算起始图片的序号\r\n            const deltaX = Math.floor(mapX / newScaleUnit)\r\n            const deltaY = Math.floor(mapY / newScaleUnit)\r\n\r\n            //计算还需要偏移的坐标\r\n            const partialX = (deltaX - mapX / newScaleUnit) * this.imgWidth\r\n            const partialY = (deltaY - mapY / newScaleUnit) * this.imgHeight\r\n\r\n            console.log(partialX, partialY)\r\n            setTimeout(() => {\r\n                this.mask.classList.add('mask-drag')\r\n                this.createMap(deltaX, deltaY, newLevel)\r\n                this.x = newLeft + partialX\r\n                this.y = newTop + partialY\r\n            }, 200)\r\n\r\n            // return\r\n            // this.scaleUnit = newScaleUnit\r\n        }\r\n        this.emitMove()\r\n    }\r\n\r\n    get x(): number {\r\n        return this._xCoordinate\r\n    }\r\n\r\n    get y(): number {\r\n        return this._yCoordinate\r\n    }\r\n\r\n    set x(newX: number) {\r\n        this._setX(newX)\r\n        this.emitMove()\r\n    }\r\n\r\n    set y(newY: number) {\r\n        this._setY(newY)\r\n        this.emitMove()\r\n    }\r\n\r\n    addMoveListener(func: (orgin: [number, number], pixelSize: [number, number]) => void) {\r\n        this.moveListeners.push(func)\r\n    }\r\n\r\n    removeMoveListener(func: (orgin: [number, number], pixelSize: [number, number]) => void) {\r\n        this.moveListeners = this.moveListeners.filter(i => i !== func)\r\n    }\r\n\r\n    emitMove() {\r\n        if (!this.moveListeners.length) return\r\n        const orgin = this._getMouseMap()\r\n        const PixelSize = this.getPixelSize()\r\n\r\n        this.moveListeners.forEach((func) => {\r\n            func(orgin, PixelSize)\r\n        })\r\n        // console.log('emitMove', orgin, PixelSize)\r\n    }\r\n\r\n    //获取地图\r\n    setOriginPostion(mapX: number, mapY: number, partialX: number = 0, partialY: number = 0) {\r\n        const { scaleUnit, baseCol, baseRow, x, y, imgHeight, imgWidth, _scale } = this\r\n\r\n        //获得当前原点的经纬坐标\r\n        const a = (baseCol - x / _scale / imgWidth) * scaleUnit\r\n        const b = (baseRow - y / _scale / imgHeight) * scaleUnit\r\n\r\n        const deltaX = (mapX - a) * _scale * imgWidth / scaleUnit\r\n        const deltaY = (mapY - b) * _scale * imgHeight / scaleUnit\r\n\r\n        this.x -= deltaX - partialX\r\n        this.y -= deltaY - partialX\r\n    }\r\n\r\n    _getMouseMap(): [number, number] {\r\n        const { scaleUnit, baseCol, baseRow, x, y, imgHeight, imgWidth, _scale } = this\r\n        const mapX = (baseCol + (0 - x) / _scale / imgWidth) * scaleUnit\r\n        const mapY = (baseRow + (0 - y) / _scale / imgHeight) * scaleUnit\r\n        return [mapX, mapY]\r\n    }\r\n\r\n    getPixelSize(): [number, number] {\r\n        //每个像素代表的地图单位\r\n        const unit = this.scaleUnit / this.scale\r\n        return [unit / this.imgWidth, unit / this.imgHeight]\r\n    }\r\n}\r\n\r\n\r\nclass MagnifierMap extends LayerMap {\r\n    miniMap: LayerMap\r\n    _magnifier: boolean\r\n    miniContainer: HTMLElement\r\n    constructor(container: HTMLElement, config: MapConfig) {\r\n        super(container, config)\r\n\r\n        if (config.miniMap) {\r\n            const miniContainer = document.createElement('div')\r\n            miniContainer.id = 'mini-map'\r\n            this.container.appendChild(miniContainer)\r\n            this.miniMap = new LayerMap(miniContainer, {\r\n                xRange: [0, 200],\r\n                yRange: [0, 200],\r\n                imgSize: [200, 200],\r\n                levelLimit: 10,\r\n                scaleRange: config.scaleRange,\r\n            })\r\n            this.miniContainer = miniContainer\r\n            this.magnifier = false\r\n\r\n        }\r\n    }\r\n\r\n    init(patchInit?: () => HTMLElement) {\r\n        this.scrollStep = super.init(patchInit)\r\n        this.miniMap.mapSrc(this.mapSrc())\r\n        this.miniMap && this.miniMap.init(patchInit)\r\n        addContext(this.container, this)\r\n        this.container.addEventListener('mousedown', () => {\r\n            this.magnifier = false\r\n        })\r\n        return this.scrollStep\r\n    }\r\n\r\n    get magnifier() {\r\n        return this._magnifier\r\n    }\r\n    set magnifier(newMagnifier: boolean) {\r\n        if(newMagnifier && this.level === this.levelLimit - 1) return\r\n        this._magnifier = newMagnifier\r\n        if (!this.miniContainer) return\r\n        this.miniContainer.style.display = newMagnifier ? 'block' : 'none'\r\n        this.miniContainer.style.left = `${this.mouseX - 100}px`\r\n        this.miniContainer.style.top = `${this.mouseY - 100}px`\r\n        //todo 目前用transform会导致\r\n        // this.miniContainer.style.transform = `translate3d(${this.mouseX}px,${this.mouseY}px,0)`\r\n        if (newMagnifier) this.getMousePositon()\r\n    }\r\n\r\n    getMousePositon() {\r\n        const { scaleUnit, baseCol, baseRow, x, y, imgHeight, imgWidth, _scale, maxScale } = this\r\n        const mapX = (baseCol + (this.mouseX - x) / _scale / imgWidth) * scaleUnit\r\n        const mapY = (baseRow + (this.mouseY - y) / _scale / imgHeight) * scaleUnit\r\n\r\n        const newScaleUnit = scaleUnit / maxScale\r\n        this.miniMap.scaleUnit = newScaleUnit\r\n        const deltaX = Math.floor(mapX / newScaleUnit)\r\n        const deltaY = Math.floor(mapY / newScaleUnit)\r\n        this.miniMap.createMap(deltaX, deltaY, this.level + 1)\r\n        console.log(mapX, mapY)\r\n        //todo 100换成参数\r\n        this.miniMap.setOriginPostion(mapX, mapY, 100, 100)\r\n        //todo调整放大镜生成后的位置\r\n    }\r\n}\r\n\r\ninterface EagleEyeConfig {\r\n    //地图xy经纬最大坐标\r\n    mapRange: [number, number]\r\n    //地图画布的大小\r\n    mapCanvasSize: [number, number]\r\n    //缩略图的大小\r\n    eagleSize: [number, number]\r\n}\r\nclass EagleEye implements EagleEyeConfig {\r\n    container: HTMLElement\r\n    eye: HTMLSpanElement\r\n    map: LayerMap\r\n    mapRange: [number, number]\r\n    mapCanvasSize: [number, number]\r\n    eagleSize: [number, number]\r\n    private _ismove: boolean\r\n    constructor(container: HTMLElement, config: EagleEyeConfig) {\r\n        const eye = document.createElement('span')\r\n        container.appendChild(eye)\r\n        this.container = container\r\n        this.eye = eye\r\n        this.mapRange = config.mapRange\r\n        this.mapCanvasSize = config.mapCanvasSize\r\n        this.eagleSize = config.eagleSize\r\n        this._ismove = false\r\n        this.beMoved = this.beMoved.bind(this)\r\n        this.addEvent()\r\n    }\r\n    addEvent() {\r\n        const { container, eye } = this\r\n        let isDrag = false\r\n\r\n        const mouseMove = (e: MouseEvent) => {\r\n            if (!isDrag) return\r\n            const { eagleSize } = this\r\n            const maxW = eagleSize[0] - eye.offsetWidth\r\n            const maxH = eagleSize[0] - eye.offsetHeight\r\n            let nLeft = e.clientX - container.offsetLeft - eye.offsetWidth / 2\r\n            let nTop = e.clientY - container.offsetTop - eye.offsetHeight / 2\r\n\r\n            // 设置遮罩层永远显示在小显示区域内部 也就是判断nLeft、nTop值\r\n            nLeft = Math.min(maxW, Math.max(0, nLeft))\r\n            nTop = Math.min(maxH, Math.max(0, nTop))\r\n\r\n            // 遮罩层位置\r\n            eye.style.transform = `translate3d(${nLeft}px,${nTop}px,0)`\r\n            this.move(nLeft, nTop)\r\n\r\n        }\r\n        container.addEventListener('mousedown', (e: MouseEvent) => {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            isDrag = true\r\n            this.isMove = true\r\n            mouseMove(e)\r\n        })\r\n        container.addEventListener('mouseup', (e: MouseEvent) => {\r\n            e.preventDefault()\r\n            e.stopPropagation()\r\n            isDrag = false\r\n            this.isMove = false\r\n        })\r\n        container.addEventListener('mouseleave', () => {\r\n            isDrag = false\r\n            this.isMove = false\r\n        })\r\n        container.addEventListener('mousemove', mouseMove)\r\n    }\r\n    set isMove(move: boolean) {\r\n        this._ismove = move\r\n        if (!this.map) return\r\n        this.map.isDrag(move)\r\n    }\r\n    get isMove() {\r\n        return this._ismove\r\n\r\n    }\r\n\r\n    linkToMap(map: LayerMap, initFunc?: (dom: HTMLElement) => void) {\r\n        this.map = map\r\n        initFunc && initFunc(this.container)\r\n        map.addMoveListener(this.beMoved)\r\n\r\n        // 225 * \r\n    }\r\n\r\n    move(x: number, y: number) {\r\n        if (!this.map) return\r\n        const { mapRange, eagleSize } = this\r\n        this.map.setOriginPostion(x * mapRange[0] / eagleSize[0], y * mapRange[1] / eagleSize[1])\r\n    }\r\n\r\n    beMoved(orgin: [number, number], pixelSize: [number, number]) {\r\n        //如果移动是由eagle发起的\r\n        if (this.isMove) return\r\n        const { eye, mapRange, eagleSize, mapCanvasSize } = this\r\n        const nLeft = orgin[0] /mapRange[0] * eagleSize[0]\r\n        const nTop = orgin[1] /mapRange[1] * eagleSize[1]\r\n        eye.style.transform = `translate3d(${nLeft}px,${nTop}px,0)`\r\n\r\n        console.log()\r\n        eye.style.width = `${pixelSize[0] * mapCanvasSize[0] * eagleSize[0] / mapRange[0]}px`\r\n        eye.style.height = `${pixelSize[1] * mapCanvasSize[1] * eagleSize[1] / mapRange[1]}px`\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default MagnifierMap\r\nexport { EagleEye }","export const throttle = (func: Function, time: number) => {\r\n    let timeout: any = null\r\n    return function () {\r\n        if (timeout !== null) return\r\n        const context = this\r\n        const args = arguments\r\n        func.apply(context, args)\r\n        timeout = setTimeout(() => {\r\n            timeout = null\r\n        }, time)\r\n    }\r\n}\r\nexport function posRemainer(a: number, b: number): number {\r\n    const res = a % b\r\n    return res < 0 ? res + b : res\r\n}\r\n\r\nexport function getTop(e: HTMLElement | Element): number {\r\n    if((<HTMLElement>e).offsetTop === undefined) {\r\n        return 0\r\n    }\r\n    let offset = (<HTMLElement>e).offsetTop\r\n    if ((<HTMLElement>e).offsetParent) offset += getTop((<HTMLElement>e).offsetParent)\r\n    return offset\r\n}  \r\n\r\nexport function getLeft(e: HTMLElement | Element): number {\r\n    if((<HTMLElement>e).offsetLeft === undefined) {\r\n        return 0\r\n    }\r\n    let offset = (<HTMLElement>e).offsetLeft\r\n    if ((<HTMLElement>e).offsetParent) offset += getLeft((<HTMLElement>e).offsetParent)\r\n    return offset\r\n}  \r\n\r\n\r\n\r\n\r\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5QA;AA0BA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAIA;AACA;AACA;AAkDA;AAAA;AAAA;AAGA;AAAA;AAEA;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;AAEA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAZA;;AAaA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAXA;;AAYA;AAEA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAXA;;AAYA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;;AAZA;;AAaA;AACA;AACA;AACA;AAGA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AApBA;AAsBA;AAAA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;;;AATA;AACA;AAAA;AACA;AACA;AAQA;AACA;AACA;;;AAVA;AAYA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;;;;;;;;;;;;AC5fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAIA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvKA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAOA;AAAA;AAEA;AACA;AACA;;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AA3DA;AA6DA;AAAA;AACA;AACA;AAMA;AACA;AACA;AACA;;;AATA;AAEA;AAAA;AACA;AACA;AAOA;AACA;AACA;AACA;;;AAVA;AAYA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AAIA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;;;AAXA;AAaA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAUA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AAEA;AARA;AACA;AACA;AAAA;AACA;AACA;;;AAAA;AAMA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAKA;AADA;;;;;;;;;;;;;;;AChWA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAPA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAPA;;;;;A","sourceRoot":""}